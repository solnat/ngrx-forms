{"version":3,"file":"start-async-validation.js","sourceRoot":"","sources":["start-async-validation.ts"],"names":[],"mappings":";;AAAA,yCAAoE;AACpE,qCAA0E;AAC1E,+BAAsC;AAEtC,qCACE,KAA6B,EAC7B,MAAuB;IAEvB,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,KAAK,oCAA0B,CAAC,IAAI,CAAC,CAAC,CAAC;QACpD,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,KAAK,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC;QAClC,MAAM,CAAC,mBAAY,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IACrC,CAAC;IAED,EAAE,CAAC,CAAC,KAAK,CAAC,kBAAkB,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC/D,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,IAAM,kBAAkB,GAAO,KAAK,CAAC,kBAAkB,SAAE,MAAM,CAAC,OAAO,CAAC,IAAI,EAAC,CAAC;IAE9E,MAAM,CAAC,yBAAiB,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,QAAQ,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,kBAAkB,EAAE,KAAK,CAAC,qBAAqB,CAAC,CAAC;AACjI,CAAC;AAnBD,kEAmBC","sourcesContent":["import { Actions, StartAsyncValidationAction } from '../../actions';\r\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\r\nimport { childReducer } from './util';\r\n\r\nexport function startAsyncValidationReducer<TValue extends KeyValue>(\r\n  state: FormGroupState<TValue>,\r\n  action: Actions<TValue>,\r\n): FormGroupState<TValue> {\r\n  if (action.type !== StartAsyncValidationAction.TYPE) {\r\n    return state;\r\n  }\r\n\r\n  if (action.controlId !== state.id) {\r\n    return childReducer(state, action);\r\n  }\r\n\r\n  if (state.pendingValidations.indexOf(action.payload.name) >= 0) {\r\n    return state;\r\n  }\r\n\r\n  const pendingValidations = [...state.pendingValidations, action.payload.name];\r\n\r\n  return computeGroupState(state.id, state.controls, state.value, state.errors, pendingValidations, state.userDefinedProperties);\r\n}\r\n"]}