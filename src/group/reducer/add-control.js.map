{"version":3,"file":"add-control.js","sourceRoot":"","sources":["add-control.ts"],"names":[],"mappings":";;AAAA,yCAA+D;AAC/D,qCAA4F;AAC5F,+BAAsC;AAEtC,2BACE,KAA6B,EAC7B,MAAuB;IAEvB,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,KAAK,+BAAqB,CAAC,IAAI,CAAC,CAAC,CAAC;QAC/C,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IAED,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,KAAK,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC;QAClC,MAAM,CAAC,mBAAY,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IACrC,CAAC;IAED,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACvD,MAAM,IAAI,KAAK,CAAC,YAAU,KAAK,CAAC,EAAE,qCAAgC,MAAM,CAAC,OAAO,CAAC,IAAI,OAAI,CAAC,CAAC,CAAC,KAAK;IACnG,CAAC;IAED,IAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,CAAC,QAAQ;QAC/C,GAAC,MAAM,CAAC,OAAO,CAAC,IAAI,IAAG,wBAAgB,CAAI,KAAK,CAAC,EAAE,SAAI,MAAM,CAAC,OAAO,CAAC,IAAM,EAAE,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC;YACnG,CAAC;IAEH,MAAM,CAAC,yBAAiB,CACtB,KAAK,CAAC,EAAE,EACR,QAAQ,EACR,KAAK,CAAC,KAAK,EACX,KAAK,CAAC,MAAM,EACZ,KAAK,CAAC,kBAAkB,EACxB,KAAK,CAAC,qBAAqB,CAC5B,CAAC;;AACJ,CAAC;AA5BD,8CA4BC","sourcesContent":["import { Actions, AddGroupControlAction } from '../../actions';\r\nimport { computeGroupState, createChildState, FormGroupState, KeyValue } from '../../state';\r\nimport { childReducer } from './util';\r\n\r\nexport function addControlReducer<TValue extends KeyValue>(\r\n  state: FormGroupState<TValue>,\r\n  action: Actions<TValue>,\r\n): FormGroupState<TValue> {\r\n  if (action.type !== AddGroupControlAction.TYPE) {\r\n    return state;\r\n  }\r\n\r\n  if (action.controlId !== state.id) {\r\n    return childReducer(state, action);\r\n  }\r\n\r\n  if (state.controls.hasOwnProperty(action.payload.name)) {\r\n    throw new Error(`Group '${state.id}' already has child control '${action.payload.name}'!`); // `;\r\n  }\r\n\r\n  const controls = Object.assign({}, state.controls, {\r\n    [action.payload.name]: createChildState(`${state.id}.${action.payload.name}`, action.payload.value),\r\n  });\r\n\r\n  return computeGroupState(\r\n    state.id,\r\n    controls,\r\n    state.value,\r\n    state.errors,\r\n    state.pendingValidations,\r\n    state.userDefinedProperties,\r\n  );\r\n}\r\n"]}