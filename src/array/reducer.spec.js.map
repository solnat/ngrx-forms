{"version":3,"file":"reducer.spec.js","sourceRoot":"","sources":["reducer.spec.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,sCAsBoB;AACpB,kCAAsD;AACtD,qCAAqD;AAErD,QAAQ,CAAC,oBAAoB,EAAE;IAC7B,IAAM,eAAe,GAAG,SAAS,CAAC;IAClC,IAAM,iBAAiB,GAAG,eAAe,GAAG,IAAI,CAAC;IAEjD,IAAM,0BAA0B,GAAmB,CAAC,EAAE,CAAC,CAAC;IACxD,IAAM,aAAa,GAAG,4BAAoB,CAAC,eAAe,EAAE,0BAA0B,CAAC,CAAC;IAExF,EAAE,CAAC,uCAAuC,EAAE;QAC1C,IAAM,WAAW,GAAG,kCAAwB,CAAC,aAAa,EAAE,EAAE,IAAI,EAAE,EAAE,EAAS,CAAC,CAAC;QACjF,MAAM,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,kDAAkD,EAAE;QACrD,IAAM,WAAW,GAAG,kCAAwB,CAAC,aAAa,EAAE,IAAI,wBAAc,CAAC,GAAG,GAAG,eAAe,EAAE,GAAG,CAAQ,CAAC,CAAC;QACnH,MAAM,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,oBAAkB,qBAAW,CAAC,IAAI,kBAAe,EAAE;QACpD,IAAM,WAAW,GAAG,kCAAwB,CAAC,aAAa,EAAE,IAAI,qBAAW,CAAC,iBAAiB,CAAQ,CAAC,CAAC;QACvG,MAAM,CAAC,YAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAC9D,MAAM,CAAC,YAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IACnE,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,oBAAkB,uBAAa,CAAC,IAAI,kBAAe,EAAE;QACtD,IAAM,KAAK,gBACN,aAAa,IAChB,QAAQ,EAAE;6BAEH,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,IAC5B,SAAS,EAAE,IAAI,EACf,WAAW,EAAE,KAAK;aAErB,GACF,CAAC;QACF,IAAM,WAAW,GAAG,kCAAwB,CAAC,KAAK,EAAE,IAAI,uBAAa,CAAC,iBAAiB,CAAQ,CAAC,CAAC;QACjG,MAAM,CAAC,YAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC/D,MAAM,CAAC,YAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAClE,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,oBAAkB,+BAAqB,CAAC,IAAI,kBAAe,EAAE;QAC9D,IAAM,KAAK,GAAG,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,CAAC;QAC9B,IAAM,KAAK,GAAG,4BAAoB,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;QAC3D,IAAM,WAAW,GAAG,kCAAwB,CAAC,KAAK,EAAE,IAAI,+BAAqB,CAAW,iBAAiB,EAAE,QAAQ,EAAE,EAAE,CAAC,CAAC,CAAC;QAC1H,MAAM,CAAE,YAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,QAAgB,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,CAAC;IAC/E,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,oBAAkB,kCAAwB,CAAC,IAAI,kBAAe,EAAE;QACjE,IAAM,KAAK,GAAG,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC,CAAC;QAC1C,IAAM,KAAK,GAAG,4BAAoB,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;QAC3D,IAAM,WAAW,GAAG,kCAAwB,CAAC,KAAK,EAAE,IAAI,kCAAwB,CAAM,iBAAiB,EAAE,QAAQ,CAAC,CAAC,CAAC;QACpH,MAAM,CAAC,YAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,CAAC;IACxE,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,iDAAiD,EAAE;QACpD,IAAM,WAAW,GAAG,kCAAwB,CAAC,aAAa,EAAE,IAAI,wBAAc,CAAC,iBAAiB,EAAE,EAAE,CAAQ,CAAC,CAAC;QAC9G,MAAM,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,6DAA6D,EAAE;QAChE,IAAM,WAAW,GAAG,kCAAwB,CAAC,aAAa,EAAE,IAAI,2BAAiB,CAAC,iBAAiB,CAAC,CAAC,CAAC;QACtG,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IACtD,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,+BAA+B,EAAE;QAClC,IAAM,KAAK,GAAG,GAAG,CAAC;QAClB,IAAM,KAAK,GAAG,kCAAwB,CAAC,aAAa,EAAE,IAAI,wBAAc,CAAC,iBAAiB,EAAE,KAAK,CAAQ,CAAC,CAAC;QAC3G,IAAM,WAAW,GAAG,kCAAwB,CAAC,KAAK,EAAE,IAAI,+BAAqB,CAAC,eAAe,CAAC,CAAC,CAAC;QAChG,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACpD,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,wBAAwB,EAAE;QAC3B,kCAAwB,CAAC,aAAa,EAAE,IAAI,wBAAc,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC,CAAC;QACjF,MAAM,CAAC,cAAM,OAAA,kCAAwB,CAAC,aAAa,EAAE,IAAI,2BAAiB,CAAC,eAAe,CAAC,CAAC,EAA/E,CAA+E,CAAC,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;IACnH,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,0DAA0D,EAAE;QAC7D,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;QAC/C,IAAI,KAAK,GAAG,kCAAwB,CAAC,aAAa,EAAE,IAAI,2BAAiB,CAAC,eAAe,CAAC,CAAC,CAAC;QAC5F,KAAK,GAAG,kCAAwB,CAAC,KAAK,EAAE,IAAI,8BAAoB,CAAC,eAAe,CAAC,CAAC,CAAC;QACnF,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,6CAA6C,EAAE;QAChD,MAAM,CAAC,cAAM,OAAA,kCAAwB,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAQ,EAAE,IAAI,2BAAiB,CAAC,eAAe,CAAC,CAAC,EAAlG,CAAkG,CAAC,CAAC,YAAY,EAAE,CAAC;IAClI,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,wBAAc,CAAC,IAAI,EAAE;QAC5B,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,WAAW,GAAG,kCAAwB,CAAC,aAAa,EAAE,IAAI,wBAAc,CAAC,eAAe,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACxG,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,yBAAe,CAAC,IAAI,EAAE;QAC7B,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,MAAM,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;YAClC,IAAM,WAAW,GAAG,kCAAwB,CAAC,aAAa,EAAE,IAAI,yBAAe,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC,CAAC;YAC1G,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,oCAA0B,CAAC,IAAI,EAAE;QACxC,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,IAAI,GAAG,UAAU,CAAC;YACxB,IAAM,WAAW,GAAG,kCAAwB,CAAC,aAAa,EAAE,IAAI,oCAA0B,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC,CAAC;YACnH,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,6BAAmB,CAAC,IAAI,EAAE;QACjC,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,IAAI,GAAG,UAAU,CAAC;YACxB,IAAM,KAAK,GAAG,IAAI,CAAC;YACnB,IAAM,KAAK,gBAAQ,aAAa,IAAE,kBAAkB,EAAE,CAAC,IAAI,CAAC,EAAE,mBAAmB,EAAE,IAAI,GAAE,CAAC;YAC1F,IAAM,WAAW,GAAG,kCAAwB,CAAC,KAAK,EAAE,IAAI,6BAAmB,CAAC,eAAe,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;YAC3G,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,+BAAqB,CAAC,IAAI,EAAE;QACnC,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,IAAI,GAAG,UAAU,CAAC;YACxB,IAAM,KAAK,gBACN,aAAa,IAChB,OAAO,EAAE,KAAK,EACd,SAAS,EAAE,IAAI,EACf,MAAM,YAAI,GAAC,GAAG,GAAG,IAAI,IAAG,IAAI,OAC5B,kBAAkB,EAAE,CAAC,IAAI,CAAC,EAC1B,mBAAmB,EAAE,IAAI,GAC1B,CAAC;YAEF,IAAM,WAAW,GAAG,kCAAwB,CAAC,KAAK,EAAE,IAAI,+BAAqB,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC,CAAC;YACtG,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,2BAAiB,CAAC,IAAI,EAAE;QAC/B,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,WAAW,GAAG,kCAAwB,CAAC,aAAa,EAAE,IAAI,2BAAiB,CAAC,eAAe,CAAC,CAAC,CAAC;YACpG,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,8BAAoB,CAAC,IAAI,EAAE;QAClC,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,KAAK,gBAAQ,aAAa,IAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,GAAE,CAAC;YACrE,IAAM,WAAW,GAAG,kCAAwB,CAAC,KAAK,EAAE,IAAI,8BAAoB,CAAC,eAAe,CAAC,CAAC,CAAC;YAC/F,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,sBAAY,CAAC,IAAI,EAAE;QAC1B,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,KAAK,gBAAQ,aAAa,IAAE,SAAS,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,GAAE,CAAC;YACvE,IAAM,WAAW,GAAG,kCAAwB,CAAC,KAAK,EAAE,IAAI,sBAAY,CAAC,eAAe,CAAC,CAAC,CAAC;YACvF,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,uBAAa,CAAC,IAAI,EAAE;QAC3B,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,WAAW,GAAG,kCAAwB,CAAC,aAAa,EAAE,IAAI,uBAAa,CAAC,eAAe,CAAC,CAAC,CAAC;YAChG,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,6BAAmB,CAAC,IAAI,EAAE;QACjC,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,WAAW,GAAG,kCAAwB,CAAC,aAAa,EAAE,IAAI,6BAAmB,CAAC,eAAe,CAAC,CAAC,CAAC;YACtG,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,+BAAqB,CAAC,IAAI,EAAE;QACnC,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,KAAK,gBAAQ,aAAa,IAAE,SAAS,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,GAAE,CAAC;YACxE,IAAM,WAAW,GAAG,kCAAwB,CAAC,KAAK,EAAE,IAAI,+BAAqB,CAAC,eAAe,CAAC,CAAC,CAAC;YAChG,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,+BAAqB,CAAC,IAAI,EAAE;QACnC,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,WAAW,GAAG,kCAAwB,CAAC,aAAa,EAAE,IAAI,+BAAqB,CAAC,eAAe,CAAC,CAAC,CAAC;YACxG,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,iCAAuB,CAAC,IAAI,EAAE;QACrC,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,KAAK,gBAAQ,aAAa,IAAE,WAAW,EAAE,IAAI,EAAE,aAAa,EAAE,KAAK,GAAE,CAAC;YAC5E,IAAM,WAAW,GAAG,kCAAwB,CAAC,KAAK,EAAE,IAAI,iCAAuB,CAAC,eAAe,CAAC,CAAC,CAAC;YAClG,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,sCAA4B,CAAC,IAAI,EAAE;QAC1C,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,MAAM,GAAG,IAAI,sCAA4B,CAAC,eAAe,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;YAC7E,IAAM,WAAW,GAAG,kCAAwB,CAAS,aAAa,EAAE,MAAM,CAAC,CAAC;YAC5E,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,qBAAW,CAAC,IAAI,EAAE;QACzB,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,MAAM,GAAG,IAAI,qBAAW,CAAC,eAAe,CAAC,CAAC;YAChD,IAAM,KAAK,gBAAQ,aAAa,IAAE,WAAW,EAAE,IAAI,EAAE,aAAa,EAAE,KAAK,GAAE,CAAC;YAC5E,IAAM,WAAW,GAAG,kCAAwB,CAAS,KAAK,EAAE,MAAM,CAAC,CAAC;YACpE,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,+BAAqB,CAAC,IAAI,EAAE;QACnC,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,MAAM,GAAG,IAAI,+BAAqB,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;YAC9D,IAAM,WAAW,GAAG,kCAAwB,CAAS,aAAa,EAAE,MAAM,CAAC,CAAC;YAC5E,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,kCAAwB,CAAC,IAAI,EAAE;QACtC,EAAE,CAAC,qBAAqB,EAAE;YACxB,IAAM,MAAM,GAAG,IAAI,kCAAwB,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;YAChE,IAAM,WAAW,GAAG,kCAAwB,CAAS,aAAa,EAAE,MAAM,CAAC,CAAC;YAC5E,MAAM,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import {\r\n  AddArrayControlAction,\r\n  AddGroupControlAction,\r\n  ClearAsyncErrorAction,\r\n  DisableAction,\r\n  EnableAction,\r\n  FocusAction,\r\n  MarkAsDirtyAction,\r\n  MarkAsPristineAction,\r\n  MarkAsSubmittedAction,\r\n  MarkAsTouchedAction,\r\n  MarkAsUnsubmittedAction,\r\n  MarkAsUntouchedAction,\r\n  RemoveArrayControlAction,\r\n  RemoveGroupControlAction,\r\n  ResetAction,\r\n  SetAsyncErrorAction,\r\n  SetErrorsAction,\r\n  SetUserDefinedPropertyAction,\r\n  SetValueAction,\r\n  StartAsyncValidationAction,\r\n  UnfocusAction,\r\n} from '../actions';\r\nimport { cast, createFormArrayState } from '../state';\r\nimport { formArrayReducerInternal } from './reducer';\r\n\r\ndescribe('form array reducer', () => {\r\n  const FORM_CONTROL_ID = 'test ID';\r\n  const FORM_CONTROL_0_ID = FORM_CONTROL_ID + '.0';\r\n  type FormArrayValue = string[];\r\n  const INITIAL_FORM_CONTROL_VALUE: FormArrayValue = [''];\r\n  const INITIAL_STATE = createFormArrayState(FORM_CONTROL_ID, INITIAL_FORM_CONTROL_VALUE);\r\n\r\n  it('should skip any non-ngrx-forms action', () => {\r\n    const resultState = formArrayReducerInternal(INITIAL_STATE, { type: '' } as any);\r\n    expect(resultState).toBe(INITIAL_STATE);\r\n  });\r\n\r\n  it('should skip any action with non-equal control ID', () => {\r\n    const resultState = formArrayReducerInternal(INITIAL_STATE, new SetValueAction('A' + FORM_CONTROL_ID, 'A') as any);\r\n    expect(resultState).toBe(INITIAL_STATE);\r\n  });\r\n\r\n  it(`should forward ${FocusAction.name}s to children`, () => {\r\n    const resultState = formArrayReducerInternal(INITIAL_STATE, new FocusAction(FORM_CONTROL_0_ID) as any);\r\n    expect(cast(resultState.controls[0]).isFocused).toEqual(true);\r\n    expect(cast(resultState.controls[0]).isUnfocused).toEqual(false);\r\n  });\r\n\r\n  it(`should forward ${UnfocusAction.name}s to children`, () => {\r\n    const state = {\r\n      ...INITIAL_STATE,\r\n      controls: [\r\n        {\r\n          ...INITIAL_STATE.controls[0],\r\n          isFocused: true,\r\n          isUnfocused: false,\r\n        },\r\n      ],\r\n    };\r\n    const resultState = formArrayReducerInternal(state, new UnfocusAction(FORM_CONTROL_0_ID) as any);\r\n    expect(cast(resultState.controls[0]).isFocused).toEqual(false);\r\n    expect(cast(resultState.controls[0]).isUnfocused).toEqual(true);\r\n  });\r\n\r\n  it(`should forward ${AddGroupControlAction.name}s to children`, () => {\r\n    const value = [{ inner: '' }];\r\n    const state = createFormArrayState(FORM_CONTROL_ID, value);\r\n    const resultState = formArrayReducerInternal(state, new AddGroupControlAction<any, any>(FORM_CONTROL_0_ID, 'inner2', ''));\r\n    expect((cast(resultState.controls[0]).controls as any).inner2).toBeDefined();\r\n  });\r\n\r\n  it(`should forward ${RemoveGroupControlAction.name}s to children`, () => {\r\n    const value = [{ inner: '', inner2: '' }];\r\n    const state = createFormArrayState(FORM_CONTROL_ID, value);\r\n    const resultState = formArrayReducerInternal(state, new RemoveGroupControlAction<any>(FORM_CONTROL_0_ID, 'inner2'));\r\n    expect(cast(resultState.controls[0]).controls.inner2).toBeUndefined();\r\n  });\r\n\r\n  it('should not update state if no child was updated', () => {\r\n    const resultState = formArrayReducerInternal(INITIAL_STATE, new SetValueAction(FORM_CONTROL_0_ID, '') as any);\r\n    expect(resultState).toBe(INITIAL_STATE);\r\n  });\r\n\r\n  it('should not update state value if no child value was updated', () => {\r\n    const resultState = formArrayReducerInternal(INITIAL_STATE, new MarkAsDirtyAction(FORM_CONTROL_0_ID));\r\n    expect(resultState.value).toBe(INITIAL_STATE.value);\r\n  });\r\n\r\n  it('should not reset child states', () => {\r\n    const value = 'A';\r\n    const state = formArrayReducerInternal(INITIAL_STATE, new SetValueAction(FORM_CONTROL_0_ID, value) as any);\r\n    const resultState = formArrayReducerInternal(state, new MarkAsSubmittedAction(FORM_CONTROL_ID));\r\n    expect(resultState.controls[0].value).toBe(value);\r\n  });\r\n\r\n  it('should not be stateful', () => {\r\n    formArrayReducerInternal(INITIAL_STATE, new SetValueAction(FORM_CONTROL_ID, []));\r\n    expect(() => formArrayReducerInternal(INITIAL_STATE, new MarkAsDirtyAction(FORM_CONTROL_ID))).not.toThrowError();\r\n  });\r\n\r\n  it('should preserve the order of properties when stringified', () => {\r\n    const expected = JSON.stringify(INITIAL_STATE);\r\n    let state = formArrayReducerInternal(INITIAL_STATE, new MarkAsDirtyAction(FORM_CONTROL_ID));\r\n    state = formArrayReducerInternal(state, new MarkAsPristineAction(FORM_CONTROL_ID));\r\n    expect(JSON.stringify(state)).toEqual(expected);\r\n  });\r\n\r\n  it('should throw if state is not an array state', () => {\r\n    expect(() => formArrayReducerInternal(INITIAL_STATE.controls[0] as any, new MarkAsDirtyAction(FORM_CONTROL_ID))).toThrowError();\r\n  });\r\n\r\n  describe(SetValueAction.name, () => {\r\n    it('should update state', () => {\r\n      const resultState = formArrayReducerInternal(INITIAL_STATE, new SetValueAction(FORM_CONTROL_ID, ['A']));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(SetErrorsAction.name, () => {\r\n    it('should update state', () => {\r\n      const errors = { required: true };\r\n      const resultState = formArrayReducerInternal(INITIAL_STATE, new SetErrorsAction(FORM_CONTROL_ID, errors));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(StartAsyncValidationAction.name, () => {\r\n    it('should update state', () => {\r\n      const name = 'required';\r\n      const resultState = formArrayReducerInternal(INITIAL_STATE, new StartAsyncValidationAction(FORM_CONTROL_ID, name));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(SetAsyncErrorAction.name, () => {\r\n    it('should update state', () => {\r\n      const name = 'required';\r\n      const value = true;\r\n      const state = { ...INITIAL_STATE, pendingValidations: [name], isValidationPending: true };\r\n      const resultState = formArrayReducerInternal(state, new SetAsyncErrorAction(FORM_CONTROL_ID, name, value));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(ClearAsyncErrorAction.name, () => {\r\n    it('should update state', () => {\r\n      const name = 'required';\r\n      const state = {\r\n        ...INITIAL_STATE,\r\n        isValid: false,\r\n        isInvalid: true,\r\n        errors: { ['$' + name]: true },\r\n        pendingValidations: [name],\r\n        isValidationPending: true,\r\n      };\r\n\r\n      const resultState = formArrayReducerInternal(state, new ClearAsyncErrorAction(FORM_CONTROL_ID, name));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(MarkAsDirtyAction.name, () => {\r\n    it('should update state', () => {\r\n      const resultState = formArrayReducerInternal(INITIAL_STATE, new MarkAsDirtyAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(MarkAsPristineAction.name, () => {\r\n    it('should update state', () => {\r\n      const state = { ...INITIAL_STATE, isDirty: true, isPristine: false };\r\n      const resultState = formArrayReducerInternal(state, new MarkAsPristineAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(EnableAction.name, () => {\r\n    it('should update state', () => {\r\n      const state = { ...INITIAL_STATE, isEnabled: false, isDisabled: true };\r\n      const resultState = formArrayReducerInternal(state, new EnableAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(DisableAction.name, () => {\r\n    it('should update state', () => {\r\n      const resultState = formArrayReducerInternal(INITIAL_STATE, new DisableAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(MarkAsTouchedAction.name, () => {\r\n    it('should update state', () => {\r\n      const resultState = formArrayReducerInternal(INITIAL_STATE, new MarkAsTouchedAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(MarkAsUntouchedAction.name, () => {\r\n    it('should update state', () => {\r\n      const state = { ...INITIAL_STATE, isTouched: true, isUntouched: false };\r\n      const resultState = formArrayReducerInternal(state, new MarkAsUntouchedAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(MarkAsSubmittedAction.name, () => {\r\n    it('should update state', () => {\r\n      const resultState = formArrayReducerInternal(INITIAL_STATE, new MarkAsSubmittedAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(MarkAsUnsubmittedAction.name, () => {\r\n    it('should update state', () => {\r\n      const state = { ...INITIAL_STATE, isSubmitted: true, isUnsubmitted: false };\r\n      const resultState = formArrayReducerInternal(state, new MarkAsUnsubmittedAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(SetUserDefinedPropertyAction.name, () => {\r\n    it('should update state', () => {\r\n      const action = new SetUserDefinedPropertyAction(FORM_CONTROL_ID, 'prop', 12);\r\n      const resultState = formArrayReducerInternal<string>(INITIAL_STATE, action);\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(ResetAction.name, () => {\r\n    it('should update state', () => {\r\n      const action = new ResetAction(FORM_CONTROL_ID);\r\n      const state = { ...INITIAL_STATE, isSubmitted: true, isUnsubmitted: false };\r\n      const resultState = formArrayReducerInternal<string>(state, action);\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(AddArrayControlAction.name, () => {\r\n    it('should update state', () => {\r\n      const action = new AddArrayControlAction(FORM_CONTROL_ID, '');\r\n      const resultState = formArrayReducerInternal<string>(INITIAL_STATE, action);\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(RemoveArrayControlAction.name, () => {\r\n    it('should update state', () => {\r\n      const action = new RemoveArrayControlAction(FORM_CONTROL_ID, 0);\r\n      const resultState = formArrayReducerInternal<string>(INITIAL_STATE, action);\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n});\r\n"]}