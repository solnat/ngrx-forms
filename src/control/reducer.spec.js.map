{"version":3,"file":"reducer.spec.js","sourceRoot":"","sources":["reducer.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  ClearAsyncErrorAction,\r\n  DisableAction,\r\n  EnableAction,\r\n  FocusAction,\r\n  MarkAsDirtyAction,\r\n  MarkAsPristineAction,\r\n  MarkAsSubmittedAction,\r\n  MarkAsTouchedAction,\r\n  MarkAsUnsubmittedAction,\r\n  MarkAsUntouchedAction,\r\n  ResetAction,\r\n  SetAsyncErrorAction,\r\n  SetErrorsAction,\r\n  SetUserDefinedPropertyAction,\r\n  SetValueAction,\r\n  StartAsyncValidationAction,\r\n  UnfocusAction,\r\n} from '../actions';\r\nimport { createFormControlState } from '../state';\r\nimport { formControlReducerInternal } from './reducer';\r\n\r\ndescribe('form control reducer', () => {\r\n  const FORM_CONTROL_ID = 'test ID';\r\n  const INITIAL_FORM_CONTROL_VALUE = '';\r\n  const INITIAL_STATE = createFormControlState<string>(FORM_CONTROL_ID, INITIAL_FORM_CONTROL_VALUE);\r\n\r\n  it('should skip any action with non-equal control ID', () => {\r\n    const resultState = formControlReducerInternal(INITIAL_STATE, new SetValueAction(FORM_CONTROL_ID + 'A', 'A'));\r\n    expect(resultState).toBe(INITIAL_STATE);\r\n  });\r\n\r\n  it('should preserve the order of properties when stringified', () => {\r\n    const expected = JSON.stringify(INITIAL_STATE);\r\n    let state = formControlReducerInternal(INITIAL_STATE, new MarkAsDirtyAction(FORM_CONTROL_ID));\r\n    state = formControlReducerInternal(state, new MarkAsPristineAction(FORM_CONTROL_ID));\r\n    expect(JSON.stringify(state)).toEqual(expected);\r\n  });\r\n\r\n  it('should throw if state is not a control state', () => {\r\n    expect(() => formControlReducerInternal({ controls: [] } as any, new MarkAsDirtyAction(FORM_CONTROL_ID))).toThrowError();\r\n  });\r\n\r\n  describe(SetValueAction.name, () => {\r\n    it('should update state', () => {\r\n      const resultState = formControlReducerInternal(INITIAL_STATE, new SetValueAction(FORM_CONTROL_ID, 'A'));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(SetErrorsAction.name, () => {\r\n    it('should update state', () => {\r\n      const errors = { required: true };\r\n      const resultState = formControlReducerInternal(INITIAL_STATE, new SetErrorsAction(FORM_CONTROL_ID, errors));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(StartAsyncValidationAction.name, () => {\r\n    it('should update state', () => {\r\n      const name = 'required';\r\n      const resultState = formControlReducerInternal(INITIAL_STATE, new StartAsyncValidationAction(FORM_CONTROL_ID, name));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(SetAsyncErrorAction.name, () => {\r\n    it('should update state', () => {\r\n      const name = 'required';\r\n      const value = true;\r\n      const state = { ...INITIAL_STATE, pendingValidations: [name], isValidationPending: true };\r\n      const resultState = formControlReducerInternal(state, new SetAsyncErrorAction(FORM_CONTROL_ID, name, value));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(ClearAsyncErrorAction.name, () => {\r\n    it('should update state', () => {\r\n      const name = 'required';\r\n      const state = {\r\n        ...INITIAL_STATE,\r\n        isValid: false,\r\n        isInvalid: true,\r\n        errors: { ['$' + name]: true },\r\n        pendingValidations: [name],\r\n        isValidationPending: true,\r\n      };\r\n\r\n      const resultState = formControlReducerInternal(state, new ClearAsyncErrorAction(FORM_CONTROL_ID, name));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(MarkAsDirtyAction.name, () => {\r\n    it('should update state', () => {\r\n      const resultState = formControlReducerInternal(INITIAL_STATE, new MarkAsDirtyAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(MarkAsPristineAction.name, () => {\r\n    it('should update state', () => {\r\n      const state = { ...INITIAL_STATE, isDirty: true, isPristine: false };\r\n      const resultState = formControlReducerInternal(state, new MarkAsPristineAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(EnableAction.name, () => {\r\n    it('should update state', () => {\r\n      const state = { ...INITIAL_STATE, isEnabled: false, isDisabled: true };\r\n      const resultState = formControlReducerInternal(state, new EnableAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(DisableAction.name, () => {\r\n    it('should update state', () => {\r\n      const resultState = formControlReducerInternal(INITIAL_STATE, new DisableAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(MarkAsTouchedAction.name, () => {\r\n    it('should update state', () => {\r\n      const resultState = formControlReducerInternal(INITIAL_STATE, new MarkAsTouchedAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(MarkAsUntouchedAction.name, () => {\r\n    it('should update state', () => {\r\n      const state = { ...INITIAL_STATE, isTouched: true, isUntouched: false };\r\n      const resultState = formControlReducerInternal(state, new MarkAsUntouchedAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(FocusAction.name, () => {\r\n    it('should update state', () => {\r\n      const resultState = formControlReducerInternal(INITIAL_STATE, new FocusAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(UnfocusAction.name, () => {\r\n    it('should update state', () => {\r\n      const state = { ...INITIAL_STATE, isFocused: true, isUnfocused: false };\r\n      const resultState = formControlReducerInternal(state, new UnfocusAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(SetUserDefinedPropertyAction.name, () => {\r\n    it('should update state', () => {\r\n      const resultState = formControlReducerInternal(INITIAL_STATE, new SetUserDefinedPropertyAction(FORM_CONTROL_ID, 'prop', 12));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(MarkAsSubmittedAction.name, () => {\r\n    it('should update state', () => {\r\n      const resultState = formControlReducerInternal(INITIAL_STATE, new MarkAsSubmittedAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(MarkAsUnsubmittedAction.name, () => {\r\n    it('should update state', () => {\r\n      const state = { ...INITIAL_STATE, isSubmitted: true, isUnsubmitted: false };\r\n      const resultState = formControlReducerInternal(state, new MarkAsUnsubmittedAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n\r\n  describe(ResetAction.name, () => {\r\n    it('should update state', () => {\r\n      const state = { ...INITIAL_STATE, isSubmitted: true, isUnsubmitted: false };\r\n      const resultState = formControlReducerInternal(state, new ResetAction(FORM_CONTROL_ID));\r\n      expect(resultState).not.toBe(INITIAL_STATE);\r\n    });\r\n  });\r\n});\r\n"]}