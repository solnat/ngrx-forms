{"version":3,"file":"add-array-control.js","sourceRoot":"","sources":["add-array-control.ts"],"names":[],"mappings":";;AAAA,sCAAmD;AACnD,4CAAoD;AACpD,kCAAwD;AACxD,+BAAqC;AAcrC,yBAAwC,KAAa,EAAE,YAA2D,EAAE,KAA2B;IAAxF,6BAAA,EAAA,mBAA2D;IAAE,sBAAA,EAAA,YAA2B;IAC7I,EAAE,CAAC,CAAC,YAAY,KAAK,IAAI,IAAI,oBAAY,CAAC,YAAmB,CAAC,CAAC,CAAC,CAAC;QAC/D,MAAM,CAAC,0BAAgB,CAAC,YAAmB,EAAE,IAAI,+BAAqB,CAAE,YAAoB,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;IAClH,CAAC;IAED,MAAM,CAAC,UAAC,CAAyB,IAAK,OAAA,eAAe,CAAC,KAAK,EAAE,kBAAW,CAAC,CAAC,CAAC,EAAE,YAA6B,CAAC,EAArE,CAAqE,CAAC;AAC9G,CAAC;AAND,0CAMC","sourcesContent":["import { AddArrayControlAction } from '../actions';\r\nimport { formArrayReducer } from '../array/reducer';\r\nimport { FormArrayState, isArrayState } from '../state';\r\nimport { ensureState } from './util';\r\n\r\n/**\r\n * This update function takes a value and optionally an index and returns a projection function\r\n * that adds a child control at the given index or at the end of a form array state.\r\n */\r\nexport function addArrayControl<TValue>(value: TValue, index?: number | null): (state: FormArrayState<TValue>) => FormArrayState<TValue>;\r\n\r\n/**\r\n * This update function takes a value, an array form state and optionally an index and adds a\r\n * child control at the given index or at the end of the state.\r\n */\r\nexport function addArrayControl<TValue>(value: TValue, state: FormArrayState<TValue>, index?: number | null): FormArrayState<TValue>;\r\n\r\nexport function addArrayControl<TValue>(value: TValue, indexOrState: number | null | FormArrayState<TValue> = null, index: number | null = null) {\r\n  if (indexOrState !== null && isArrayState(indexOrState as any)) {\r\n    return formArrayReducer(indexOrState as any, new AddArrayControlAction((indexOrState as any).id, value, index));\r\n  }\r\n\r\n  return (s: FormArrayState<TValue>) => addArrayControl(value, ensureState(s), indexOrState as number | null);\r\n}\r\n"]}