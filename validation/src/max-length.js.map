{"version":3,"file":"max-length.js","sourceRoot":"","sources":["max-length.ts"],"names":[],"mappings":";;AAEA;;;;;;;;;;;;;;;;;;;;;;;;GAwBG;AACH,mBAA0B,SAAiB;IACzC,EAAE,CAAC,CAAC,SAAS,KAAK,IAAI,IAAI,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;QAClD,MAAM,IAAI,KAAK,CAAC,qGAAmG,SAAS,MAAG,CAAC,CAAC;IACnI,CAAC;IAED,MAAM,CAAC,UAAC,KAA4B;QAClC,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC;YACnB,MAAM,CAAC,EAAE,CAAC;QACZ,CAAC;QAED,IAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;QAE5B,EAAE,CAAC,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC;YACxB,MAAM,CAAC,EAAE,CAAC;QACZ,CAAC;QAED,MAAM,CAAC;YACL,SAAS,EAAE;gBACT,SAAS,WAAA;gBACT,KAAK,OAAA;gBACL,YAAY,EAAE,MAAM;aACrB;SACF,CAAC;IACJ,CAAC,CAAC;AACJ,CAAC;AAxBD,8BAwBC","sourcesContent":["import { ValidationErrors } from 'ngrx-forms';\r\n\r\n/**\r\n * A validation function that requires a `string` or `array` value to have a maximum length.\r\n * Considers `null` as valid. Combine this function with the `required` validation\r\n * function if `null` should be considered invalid.\r\n *\r\n * The validation error returned by this validation function has the following shape:\r\n *\r\n * ```typescript\r\n * {\r\n *   maxLength: {\r\n *     maxLength: number;\r\n *     value: string;\r\n *     actualLength: number;\r\n *   };\r\n * }\r\n * ```\r\n *\r\n * Usually you would use this validation function in conjunction with the `validate`\r\n * update function to perform synchronous validation in your reducer:\r\n *\r\n * ```typescript\r\n * updateGroup<MyFormValue>({\r\n *  name: validate(maxLength(10)),\r\n * })\r\n */\r\nexport function maxLength(maxLength: number) {\r\n  if (maxLength === null || maxLength === undefined) {\r\n    throw new Error(`The maxLength Validation function requires the maxLength parameter to be a non-null number, got ${maxLength}!`);\r\n  }\r\n\r\n  return (value: string | any[] | null): ValidationErrors => {\r\n    if (value === null) {\r\n      return {};\r\n    }\r\n\r\n    const length = value.length;\r\n\r\n    if (length <= maxLength) {\r\n      return {};\r\n    }\r\n\r\n    return {\r\n      maxLength: {\r\n        maxLength,\r\n        value,\r\n        actualLength: length,\r\n      },\r\n    };\r\n  };\r\n}\r\n"]}